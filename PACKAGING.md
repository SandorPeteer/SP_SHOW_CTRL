## Packaging (macOS + Windows)

This project can be distributed as:
- **Windows**: `.exe` (PyInstaller)
- **macOS**: `.app` (PyInstaller)

The app will **auto-download FFmpeg tools** (`ffmpeg`, `ffplay`, `ffprobe`) on first run if missing.

### First-run FFmpeg auto-install

- Download location:
  - Windows: `%APPDATA%\\SP_Show_Control\\tools\\ffmpeg\\bin`
  - macOS: `~/Library/Application Support/SP_Show_Control/tools/ffmpeg/bin`
- Override tool folder (optional): set `SP_SHOW_CTRL_FFMPEG_DIR` to a folder that contains the binaries.
- macOS note: if FFmpeg is already installed via Homebrew, the app also checks `/opt/homebrew/bin` and `/usr/local/bin`.

### Build prerequisites

- Python 3.10+ recommended
- No global installs needed: the build scripts create a local venv (`.venv_build`) automatically.

### Build commands

macOS:
```bash
./packaging/build_macos.sh
```

macOS (yt-dlr DJ app):
```bash
./packaging/build_yt_dlr_macos.sh
```

Windows (yt-dlr DJ app, PowerShell):
```powershell
.\packaging\build_yt_dlr_windows.ps1
```

Windows (PowerShell):
```powershell
.\packaging\build_windows.ps1
```

### App icon

- Source: `assets/logo.png`
- Generated:
  - macOS: `assets/app_icon.icns` (auto-generated by `packaging/build_macos.sh`)
  - Windows: `assets/app_icon.ico` (auto-generated by `packaging/build_windows.ps1`)

### mpv bundling (recommended)

If `mpv` is installed on the build machine, the build scripts bundle it into the app:
- macOS: bundled as `tools/mpv/mpv` inside the `.app`
- Windows: bundled as `tools/mpv/mpv.exe` inside the `.exe` folder

Runtime will prefer bundled/system `mpv` (then fallback to `ffplay`).
